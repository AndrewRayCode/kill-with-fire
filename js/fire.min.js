(function(){function i(n,r,a,f){var l={x:parseInt(a.offsetLeft,10),y:parseInt(a.offsetTop,10)},c=$("<div></div>").appendTo(a).css({background:"transparent url("+e+"circle_eat.png) top left no-repeat",position:"absolute",top:r-l.y-36+"px",left:n-l.x-36+"px",width:"200px",height:"200px"}),h=!1;f===undefined&&(f=2),f==1?t.push(new s(h?e+"checkers.png":e+"explosion_sprite_4.png",64,64,256,256,n,r,document.body)):t.push(new s(h?e+"checkers.png":e+"explosion_sprite_"+u(1,3)+".png",128,128,512,512,n,r,document.body)),t.length==1&&o(),f>0&&(setTimeout(function(){i(n,r+20-u(0,80),a,f-1)},u(100,220)),setTimeout(function(){i(n-45+u(0,90),r+50-u(0,100),a,f-1)},u(30,90)))}function s(e,n,r,i,s,o,u,f,l){return this.bg_x=0,this.bg_y=0,this.sprite_width=i,this.sprite_height=s,this.width=n,this.height=r,this.animation=$("<div></div>").appendTo(f).css({position:"absolute",background:"transparent url("+e+") top left no-repeat scroll",height:r+"px",width:n+"px",top:u+"px",left:o+"px","z-index":"9999"}),this.destroy=function(){a(t,this),this.animation.remove(),l&&l()},this}function o(){for(var e=0;e<t.length;e++){t[e].bg_x++,t[e].bg_x*t[e].width==t[e].sprite_width&&(t[e].bg_x=0,t[e].bg_y++);if(t[e].bg_y*t[e].height>t[e].sprite_height){t[e].destroy();break}t[e].animation.css("background-position",-(t[e].bg_x*t[e].width)+"px "+ -(t[e].bg_y*t[e].height)+"px")}t.length>0&&setTimeout(o,r.Animation)}function u(e,t){return arguments.length||(e=0,t=100),Math.floor(Math.random()*(t-e+1))+e}var e,t=[],n={Normal:1,Smooth:2},r={Tween:10,Animation:20};$.fn.killWithFire=function(t){t=t||{},e=t.image_path||"images/";var n=this.get(0),r=this;this.css("overflow","hidden");var s={y:parseInt(n.offsetTop,10),x:parseInt(n.offsetLeft,10)},o=parseInt(n.clientHeight,10),u=Math.round(parseInt(n.clientWidth,10)/50);for(var a=u;a>0;a--)setTimeout(function(e){return function(){i(e*50+s.x-128,s.y+o/2-20,n)}}(a),450*Math.abs(a-u));return setTimeout(function(){r.fadeOut().promise().then(function(){r.remove(),t.callback&&t.callback()})},450*u),this};var a=function(e,t){for(var n=0;n<e.length;n++)if(e[n]==t)return e.splice(n,1),t;return!1}})();